//
   Created by Denny on 29.07.2014.

.container-fluid(data-bind = "visible: physicalAttackUIActive, with: physicalAttack")
    .row.text-center(data-bind = "visible: attacker() && defender()")
        .col-lg-3.form-group(data-bind = "with: attacker")
            .merpg-well.merpg-attackUI-well
                .container-fluid.text-left
                    .row
                        .col-xs-6
                            a.thumbnail(href = "#")
                                image.merpg-fill(src="/images/person-placeholder.jpg")
                        .col-xs-6
                            .row
                                h4(data-bind = "text: _id")
                            .row
                                span.text-warning(data-bind = "text: currentOB() + ' OB'")
                            .row
                                span.text-success(data-bind = "text: currentDB() + ' DB'")
                    .row.form-group
                        .col-md-12
                            table.table.table-responsive
                                tbody
                                    tr
                                        th Waffe
                                        td(data-bind = "text: weaponName")
                                    tr(data-bind = "visible: shield")
                                        th Schild
                                        td(data-bind = "text: shieldName")
                                    tr(data-bind = "visible: armor")
                                        th Rüstung
                                        td(data-bind = "text: armorName")
                    .row.form-group
                        .col-md-12
                            .progress.merpg-bar-align
                                .progress-bar.progress-bar-danger(role='progressbar',
                                data-bind = "attr: {'aria-valuenow': currentHits() - hitsTaken(), 'aria-valuemax': currentHits()}, style: {width: max((currentHits() - hitsTaken()) / currentHits() * 100, 0) + '%'}", aria-valuemin='0')
        .col-lg-4.form-group
            .merpg-well.merpg-attackResult-well
                .container-fluid
                    .row
                        .col-md-12
                            table.table.table-responsive.text-left
                                thead
                                    tr
                                        th Typ
                                        th Wurf
                                        th Ergebnis
                                tbody
                                    tr
                                        td Angriff
                                        td
                                            input.merpg-tableInput(type = "text", data-bind = "value: attackRoll, valueUpdate: 'afterkeydown'")
                                        td(data-bind = "text: attackResultText")
                                    tr(data-bind = "visible: attackResult().critical")
                                        td Primär Krit
                                        td
                                            input.merpg-tableInput(type = "text", data-bind = "value: primaryCriticalRoll, valueUpdate: 'afterkeydown'")
                                        td(data-bind = "text: primaryCriticalResultText")
                                    tr(data-bind = "visible: attacker().weapon.secondaryCritical && attackResult().critical >= 'C' && !(defender().size == 'large' || defender().size == 'huge')")
                                        td Sekundär Krit
                                        td
                                            input.merpg-tableInput(type = "text", data-bind = "value: secondaryCriticalRoll, valueUpdate: 'afterkeydown'")
                                        td(data-bind = "text: secondaryCriticalResultText")
                                    tr
                                        td(colspan="2")
                                            a.btn.btn-success.btn-block(data-bind = "click: applyResults")
                                                | Ausführen
                                        td(colspan="1")
                                            a.btn.btn-danger.btn-block(data-bind = "click: cancelAttack")
                                                | Abbrechen
        .col-lg-2.form-group
            .merpg-well.text-left
                .container-fluid
                    .row.merpg-pad-top(data-bind = "visible: defender().size == 'large' || defender().size == 'huge'")
                        .col-md-12
                            select.form-control(data-bind = "value: weaponType")
                                option(value = "regular") Normale Waffe
                                option(value = "magic") Magische Waffe
                                option(value = "mithril") Mithril Waffe
                                option(value = "holy") Heilige Waffe
                                option(value = "slaying") Göttliche Waffe
                    .row
                        .col-md-12
                            .checkbox
                                label
                                    input#checkboxFlankAttack(type='checkbox', data-bind = "checked: flankAttack")
                                    | Flankenangriff
                            .checkbox
                                label
                                    input#checkboxRearAttack(type='checkbox', data-bind = "checked: rearAttack")
                                    | Angriff von Hinten
                            .checkbox
                                label
                                    input#checkboxDefenderSurprised(type='checkbox', data-bind = "checked: surprised")
                                    | Überraschungsangriff
                            .checkbox
                                label
                                    input#checkboxAttackerChangedWeapons(type='checkbox', data-bind = "checked: changedWeapon")
                                    | Waffe gewechselt
                    .row
                        .col-md-12
                            input#inputSpecial(type='number', data-bind = "value: special, valueUpdate: 'afterkeydown'")
        .col-lg-3.form-group(data-bind = "with: defender")
            .merpg-well.merpg-attackUI-well(data-bind = "css: {'merpg-battleUI-dead': dead}")
                .container-fluid.text-left
                    .row
                        .col-xs-6
                            a.thumbnail(href = "#")
                                image.merpg-fill(src="/images/person-placeholder.jpg")
                        .col-xs-6
                            .row
                                h4(data-bind = "text: _id")
                            .row
                                span.text-warning(data-bind = "text: currentOB() + ' OB'")
                            .row
                                span.text-success(data-bind = "text: currentDB() + ' DB'")
                    .row.form-group
                        .col-md-12
                            table.table.table-responsive
                                tbody
                                    tr
                                        th Waffe
                                        td(data-bind = "text: weaponName")
                                    tr(data-bind = "visible: shield")
                                        th Schild
                                        td(data-bind = "text: shieldName")
                                    tr(data-bind = "visible: armor")
                                        th Rüstung
                                        td(data-bind = "text: armorName")
                    .row.form-group
                        .col-md-12
                            .progress.merpg-bar-align
                                .progress-bar.progress-bar-danger(role='progressbar',
                                data-bind = "attr: {'aria-valuenow': currentHits() - hitsTaken(), 'aria-valuemax': currentHits()}, style: {width: max((currentHits() - hitsTaken()) / currentHits() * 100, 0) + '%'}", aria-valuemin='0')